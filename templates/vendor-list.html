<!-- TODO: This page will show the list of available vendors. Initial display should be based on
    which vendor category the user click on the index.html
    There should be tabs to choose which category of vendors user want to see, each tabs will
    select one vendor's category from database to display on the page (the tabs doesn't link to
    different html page, it just display different list based on the category chosen)
-->

<!-- TODO: Each vendor's card will show only name, min to max price, location(state or zip, not the entire address),
    rating(optional), a button for booking, and a button (or just a link when the card is clicked) to portfolio.html.
-->

 <!-- TODO: Use bulma to design this page -->
{% block head %}
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/vendor-list.css') }}">
{% endblock %}
{% extends 'layout.html' %}
{% block body %}
<div class="container is-fluid">
  <div class="section">
    <div class="columns">
      <div class="column is-2">
        <aside class="menu vendor-search-menu sticky">
          <p class="menu-label">
            Vendor Search
          </p>
          <div class="field">
            <div class="control has-icons-left">
              <input class="input is-small" type="text" placeholder="Name, type, location...">
              <span class="icon is-left">
                <i class="mdi mdi-magnify"></i>
              </span>
            </div>
          </div>
          <p class="menu-label">
            Vendor Types
          </p>
          <ul class="menu-list">
            <li>
              <a class="getVendorByType" data-type="venue">
                Venues
              </a>
            </li>
            <li>
              <a class="getVendorByType" data-type="photographer">
                Photographers
              </a>
            </li>
            <li>
              <a class="getVendorByType" data-type="videographer">
                Videographers
              </a>
            </li>
            <li>
              <a class="getVendorByType" data-type="caterer">
                Caterers
              </a>
            </li>
            <li>
              <a class="getVendorByType" data-type="music">
                Band/DJ
              </a>
            </li>
            <li>
              <a class="getVendorByType" data-type="cosmetics">
                Hairstyle &amp; Make Up Artists
              </a>
            </li>
            <li>
              <a class="getVendorByType" data-type="tailor">
                Tailors
              </a>
            </li>
          </ul>
          <p class="menu-label">
            Filters
          </p>
          <ul class="menu-list">
            <li>
              <a class="getVendorByType" data-type="venue">
                Venues
              </a>
            </li>
            <li>
              <a class="getVendorByType" data-type="photographer">
                Photographers
              </a>
            </li>
            <li>
              <a class="getVendorByType" data-type="videographer">
                Videographers
              </a>
            </li>
            <li>
              <a class="getVendorByType" data-type="caterer">
                Caterers
              </a>
            </li>
            <li>
              <a class="getVendorByType" data-type="music">
                Band/DJ
              </a>
            </li>
            <li>
              <a class="getVendorByType" data-type="cosmetics">
                Hairstyle &amp; Make Up Artists
              </a>
            </li>
            <li>
              <a class="getVendorByType" data-type="tailor">
                Tailors
              </a>
            </li>
          </ul>
        </aside>
      </div>
      <div class="column is-narrow"></div>
      <div class="column">
        <div class="tile is-ancestor vendor-list-card-wrapper">
          {% for vendor in vendors %}
            <div class="tile is-parent vendor-list-card">
              <article class="tile is-child notification is-info">
                <p class="title">{{ vendor.contactName }}</p>
                <p class="subtitle">{{ vendor.vendorType }}</p>
                <p>{{ vendor.businessName }}</p>
                <p><small>{{ vendor.streetAddress }}</small></p>
                <p><small>{{ vendor.city }}</small></p>
              </article>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
{% block scripts %}
<script defer>
  var loc, tag;
  update_tag();
  $(window).on('popstate', e => {
    update_tag();
  })
  function update_tag(){
    loc = window.location.href.split('#');
    tag = loc.length > 1 ? loc[1] : '';
    if(tag != '' && !api_call_made){
      getVendorByType(tag);
    }
  }
  
  var elements = $('.sticky');
  Stickyfill.add(elements);
</script>
{% endblock %}
